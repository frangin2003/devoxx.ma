<template>
  <div class="anime-title">
    <div class="logo-animation">
      <div class="letters">
        <div class="letter letter-o">
          <svg viewbox="0 0 162 162">
            <g fill="none" fill-rule="evenodd" stroke="#5E89FB">
              <g id="g10">
                <path
                  style="stroke-width:39.39899826"
                  d="M 141.177,80.973999 C 142.75853,120.37207 99.929407,152.61124 62.595931,139.44824 24.399254,128.96619 7.1170336,78.256308 30.459448,46.413362 51.287041,12.853473 104.87522,10.911858 128.03448,42.926496 c 8.48504,10.737848 13.17399,24.367347 13.14252,38.047503 z"
                  id="ellipse4"
                  inkscape:connector-curvature="0"
                />
                <path
                  style="stroke-width:2.64580011"
                  d="M 123.148,80.649002 C 124.21411,108.15777 94.213802,130.41094 68.224419,121.28233 41.617783,114.08053 29.409074,78.786002 45.762895,56.633063 60.387603,33.295599 97.720767,31.962588 113.96214,54.210065 c 5.92244,7.44986 9.20857,16.924065 9.18586,26.438937 z"
                  id="ellipse6"
                  inkscape:connector-curvature="0"
                />
                <path
                  style="stroke-width:39.39899826"
                  d="M 140.924,80.946999 C 142.50552,120.34507 99.676401,152.58424 62.342925,139.42123 24.146248,128.93919 6.8640276,78.229307 30.206442,46.386362 51.034035,12.826473 104.62221,10.884858 127.78147,42.899496 c 8.48504,10.737848 13.17399,24.367346 13.14253,38.047503 z"
                  id="ellipse8"
                  inkscape:connector-curvature="0"
                />
              </g>
              <path
                style="fill:none;stroke-width:0"
                d="m 80.451,36.716 c -0.02677,2.873304 0.186522,4.727277 0,0 z"
                id="path12"
                inkscape:connector-curvature="0"
              />
              <path
                style="stroke-width:2.59290004"
                d="M 159.235,80.952003 C 161.24652,132.23106 105.38325,173.87491 56.887609,156.8191 7.2503234,143.32067 -15.418421,77.457388 15.031663,36.111485 42.241675,-7.4515643 111.88682,-9.9506674 142.11761,31.587469 153.1589,45.504673 159.27687,63.192113 159.235,80.952003 Z"
                id="ellipse14"
                inkscape:connector-curvature="0"
              />
            </g>
          </svg>
        </div>
        <div class="letter letter-c">
          <svg viewbox="0 0 162 162">
            <g fill="none" fill-rule="evenodd" stroke="#5E89FB">
              <path
                class="fill in"
                d="m101.08 21.193c-15.883-0.06724 0 0-21.139-0.19342-33.136-0.30318-60 26.863-60 60 0 33.137 26.863 60 60 60h21.356"
                stroke-width="40"
              />
              <path
                class="line out"
                d="m81 39.346c-22.091 0-40 19.562-40 41.654 0 22.091 17.909 40 40 40h20v40h-20c-44.183 0-80-35.817-80-80 0-44.183 35.82-79.499 80-80l19.918-0.22585-0.43327 39.168s1.378 0-19.485-0.59575z"
                stroke-width="2"
              />
              <path
                class="fill out"
                d="m101.06 20.359c-15.883-0.06724 0 0-21.139-0.19342-33.136-0.30318-60 26.863-60 60 0 33.137 26.863 60 60 60h21.356"
                stroke-width="40"
              />
            </g>
          </svg>
        </div>
        <div class="letter letter-n">
          <svg viewBox="0 0 162 162">
            <g fill="none" fill-rule="evenodd" stroke="#FB155A">
              <path
                class="fill in"
                stroke-width="40"
                d="M21 161V1"
                transform="rotate(180)"
              />
              <path
                class="fill out"
                stroke-width="40"
                d="M21 1v160"
                transform="rotate(180)"
              />
              <path
                class="fill in"
                stroke-width="40"
                d="M21 161V81c1-33.14 26.86-60 60-60a60 60 0 0 1 60 60v80"
                transform="rotate(180)"
              />
              <path
                class="fill out"
                stroke-width="40"
                d="M141 161V81a60 60 0 0 0-60-60c-33.14 0-59 26.86-60 60v80"
                transform="rotate(180)"
              />
              <path
                class="line out"
                stroke-width="2"
                d="M41 161V1H1v160h40z"
                transform="rotate(180)"
              />
              <path
                class="line out"
                stroke-width="2"
                d="M1 161V80.4C2.35 36.27 37.2 1 81 1a80 80 0 0 1 80 80v80h-40V81a40 40 0 0 0-40-40c-21.7 0-39.18 17.59-40 40.33V161H1z"
                transform="rotate(180)"
              />
            </g>
          </svg>
        </div>
        <div class="letter letter-a">
          <svg viewBox="0 0 162 162">
            <g fill="none" fill-rule="evenodd" stroke="#5E89FB">
              <path
                class="fill in"
                stroke-width="40"
                d="M101 141H81a60 60 0 1 1 0-120c33.14 0 59 26.86 60 60v80"
              />
              <path
                class="fill out"
                stroke-width="40"
                d="M141 161V81c-1-33.14-26.86-60-60-60a60 60 0 1 0 0 120h20"
              />
              <path
                class="line out"
                stroke-width="2"
                d="M121 161V81.33C120.18 58.59 102.7 41 81 41a40 40 0 1 0 0 80h20v40H81A80 80 0 1 1 81 1c43.8 0 78.66 35.27 80 79.7V161h-40z"
              />
            </g>
          </svg>
        </div>

        <div class="letter letter-i">
          <svg viewBox="0 0 82 162">
            <g fill="none" fill-rule="evenodd" stroke="#18FF92">
              <path
                class="fill in"
                stroke-width="40"
                d="M21 61v20a60 60 0 0 0 60 60"
              />
              <path
                class="fill out"
                stroke-width="40"
                d="M81 141a60 60 0 0 1-60-60V61"
              />
              <path
                class="line out"
                stroke-width="2"
                d="M81 121a40 40 0 0 1-40-40V61H1v20a80 80 0 0 0 80 80v-40z"
              />
            </g>
          </svg>
        </div>
        <div class="letter letter-m-1">
          <svg viewBox="0 0 162 162">
            <g fill="none" fill-rule="evenodd" stroke="#5E89FB">
              <path class="fill in" stroke-width="40" d="M21 161V1" />
              <path class="fill out" stroke-width="40" d="M21 1v160" />
              <path
                class="fill in"
                stroke-width="40"
                d="M21 161V81c1-33.14 26.86-60 60-60a60 60 0 0 1 60 60v80"
              />
              <path
                class="fill out"
                stroke-width="40"
                d="M141 161V81a60 60 0 0 0-60-60c-33.14 0-59 26.86-60 60v80"
              />
              <path class="line out" stroke-width="2" d="M41 161V1H1v160h40z" />
              <path
                class="line out"
                stroke-width="2"
                d="M1 161V80.4C2.35 36.27 37.2 1 81 1a80 80 0 0 1 80 80v80h-40V81a40 40 0 0 0-40-40c-21.7 0-39.18 17.59-40 40.33V161H1z"
              />
            </g>
          </svg>
        </div>
        <div class="letter letter-m-2">
          <svg viewBox="0 0 162 162">
            <g fill="none" fill-rule="evenodd" stroke="#FB155A">
              <path
                class="fill in"
                stroke-width="40"
                d="M21 161V81c1-33.14 26.86-60 60-60a60 60 0 0 1 60 60v80"
              />
              <path
                class="fill out"
                stroke-width="40"
                d="M141 161V81a60 60 0 0 0-60-60c-33.14 0-59 26.86-60 60v80"
              />
              <path
                class="line out"
                stroke-width="2"
                d="M1 161V80.4C2.35 36.27 37.2 1 81 1a80 80 0 0 1 80 80v80h-40V81a40 40 0 0 0-40-40c-21.7 0-39.18 17.59-40 40.33V161H1z"
              />
            </g>
          </svg>
        </div>
        <div class="letter letter-e">
          <svg viewBox="0 0 162 162">
            <g fill="none" fill-rule="evenodd" stroke="#18FF92">
              <path
                class="fill in"
                stroke-width="40"
                d="M81 101h60V81c-1-33.14-26.86-60-60-60a60 60 0 1 0 0 120"
              />
              <path
                class="fill out"
                stroke-width="40"
                d="M81 141a60 60 0 1 1 0-120c33.14 0 59 26.86 60 60v20H81"
              />
              <path
                class="line out"
                stroke-width="2"
                d="M81 81v40h80V80.7C159.66 36.27 124.8 1 81 1a80 80 0 1 0 0 160v-40a40 40 0 1 1 0-80c21.6 0 39.01 17.42 39.99 40H81z"
              />
            </g>
          </svg>
        </div>
        <div class="letter letter-e-2">
          <svg viewBox="0 0 162 162">
            <g fill="none" fill-rule="evenodd" stroke="#18FF92">
              <path
                class="fill in"
                stroke-width="40"
                d="M81 101h60V81c-1-33.14-26.86-60-60-60a60 60 0 1 0 0 120"
              />
              <path
                class="fill out"
                stroke-width="40"
                d="M81 141a60 60 0 1 1 0-120c33.14 0 59 26.86 60 60v20H81"
              />
              <path
                class="line out"
                stroke-width="2"
                d="M81 81v40h80V80.7C159.66 36.27 124.8 1 81 1a80 80 0 1 0 0 160v-40a40 40 0 1 1 0-80c21.6 0 39.01 17.42 39.99 40H81z"
              />
            </g>
          </svg>
        </div>
        <div class="logo-icon">
          <div class="icon">
            <svg viewBox="0 0 62 62">
              <g
                fill="none"
                fill-rule="evenodd"
                stroke-width="2"
                transform="translate(1 1)"
              >
                <path
                  class="icon-curve"
                  stroke="#FF1554"
                  d="M0 16a80.88 80.88 0 0 1 44 44"
                />
                <path
                  class="icon-line"
                  stroke="#5E89FB"
                  d="M4 0h54a2 2 0 0 1 2 2.01V58A2 2 0 0 1 58 60H2a2 2 0 0 1-2-2.01V2A2 2 0 0 1 2 0h2z"
                />
                <rect
                  width="40"
                  height="40"
                  x="10"
                  y="10"
                  stroke="#18FF92"
                  rx="20"
                />
              </g>
            </svg>
          </div>
          <div class="icon-text">
            <svg viewBox="0 0 160 62">
              <g fill="#FBF3FB" fill-rule="evenodd">
                <path
                  d="M27.33 18h1.73l10.15 25.7h-1.69l-3.24-8.24H21.97l-3.28 8.24H17L27.33 18zm6.45 16.1l-5.51-14.55h-.07l-5.73 14.54h11.3z"
                />
                <polygon
                  points="51.334 18 53.314 18 69.55 41.58 69.622 41.58 69.622 18 71.206 18 71.206 43.704 69.334 43.704 52.99 19.944 52.918 19.944 52.918 43.704 51.334 43.704"
                />
                <polygon
                  points="86.027 18 87.611 18 87.611 43.704 86.027 43.704"
                />
                <polygon
                  points="102.433 18 104.701 18 114.745 41.94 114.817 41.94 124.753 18 127.021 18 127.021 43.704 125.437 43.704 125.437 19.944 125.365 19.944 115.573 43.704 113.989 43.704 104.089 19.944 104.017 19.944 104.017 43.704 102.433 43.704"
                />
                <polygon
                  points="141.843 18 159.123 18 159.123 19.368 143.427 19.368 143.427 29.664 158.187 29.664 158.187 31.032 143.427 31.032 143.427 42.336 159.303 42.336 159.303 43.704 141.843 43.704"
                />
              </g>
            </svg>
          </div>
        </div>
        <div class="dot dot-i">
          <svg viewBox="0 0 42 42">
            <g fill="none" fill-rule="evenodd">
              <rect width="40" height="40" x="1" y="1" fill="#17F28C" rx="20" />
            </g>
          </svg>
        </div>
        <div class="dot dot-e">
          <svg viewBox="0 0 42 42">
            <g fill="none" fill-rule="evenodd">
              <rect width="40" height="40" x="1" y="1" fill="#FFFFFF" rx="20" />
            </g>
          </svg>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import anime from "animejs";

export default {
  name: "AnimeTitle",
  data() {
    return {};
  },
  mounted() {
    var logoEl = document.querySelector(".logo-animation");
    var pathEls = document.querySelectorAll(".logo-animation path");
    var innerWidth = window.innerWidth;
    var maxWidth = 740;
    var logoScale = innerWidth <= maxWidth ? innerWidth / maxWidth : 1;
    var logoTimeline = anime.timeline();

    logoEl.style.transform = "translateY(50px) scale(" + logoScale + ")";

    for (var i = 0; i < pathEls.length; i++) {
      var el = pathEls[i];
      el.setAttribute("stroke-dashoffset", anime.setDashoffset(el));
    }

    logoTimeline
      .add({
        targets: ".dot-e",
        translateX: [
          { value: -600, duration: 520, delay: 200, easing: "easeInQuart" },
          {
            value: [-100, 0],
            duration: 500,
            delay: 1000,
            easing: "easeOutQuart"
          }
        ],
        scale: [
          { value: [0, 1], duration: 200, easing: "easeOutBack" },
          { value: 0, duration: 20, delay: 500, easing: "easeInQuart" },
          { value: 1, duration: 200, delay: 1000, easing: "easeOutQuart" },
          { value: 0, duration: 400, delay: 500, easing: "easeInBack" }
        ],
        offset: 0
      })
      .add({
        targets: ".dot-i",
        translateY: { value: [-200, 0], duration: 500, elasticity: 400 },
        scale: [
          { value: [0, 1], duration: 100, easing: "easeOutQuart" },
          { value: 0, duration: 400, delay: 1400, easing: "easeInBack" }
        ],
        delay: 1200,
        offset: 0
      })
      .add({
        targets: ".fill.in",
        strokeDashoffset: {
          value: [anime.setDashoffset, 0],
          duration: 600,
          delay: function(el, i, t) {
            return 700 + i * 100;
          },
          easing: "easeOutQuart"
        },
        stroke: {
          value: [
            "#FFF",
            function(el) {
              return anime.getValue(el.parentNode, "stroke");
            }
          ],
          duration: 500,
          delay: 500,
          easing: "easeInQuad"
        },
        opacity: {
          value: 0,
          duration: 1,
          delay: function(el, i, t) {
            return 1900 + i * 80;
          }
        },
        offset: 0
      })
      .add({
        targets: ".fill.out",
        strokeDashoffset: [
          { value: [anime.setDashoffset, anime.setDashoffset], duration: 1890 },
          {
            value: [0, anime.setDashoffset],
            duration: 800,
            delay: function(el, i) {
              return i * 80;
            },
            easing: "easeInQuart"
          }
        ],
        offset: 0
      })
      .add({
        targets: ".line.out",
        strokeDashoffset: {
          value: [0, anime.setDashoffset],
          duration: 1200,
          delay: function(el, i, t) {
            return 2500 + i * 100;
          },
          easing: "easeInQuart"
        },
        strokeWidth: {
          value: [0, 2],
          delay: function(el, i, t) {
            return 2000 + i * 100;
          },
          duration: 200,
          easing: "linear"
        },
        offset: 0
      })
      .add({
        targets: ".icon",
        opacity: { value: 1, duration: 10, delay: 2800, easing: "linear" },
        translateY: { value: 60, duration: 800 },
        delay: 4200,
        offset: 0
      })
      .add({
        targets: ".icon-line",
        strokeDashoffset: [
          { value: [anime.setDashoffset, anime.setDashoffset], duration: 3000 },
          { value: 0, duration: 1200, easing: "easeInOutQuart" }
        ],
        strokeWidth: {
          value: [8, 2],
          delay: 3000,
          duration: 800,
          easing: "easeInQuad"
        },
        stroke: {
          value: [
            "#FFF",
            function(el) {
              return anime.getValue(el, "stroke");
            }
          ],
          duration: 800,
          delay: 3400,
          easing: "easeInQuad"
        },
        offset: 0
      })
      .add({
        targets: [".icon-text path", ".icon-text polygon"],
        translateY: [50, 0],
        opacity: { value: [0, 1], duration: 100, easing: "linear" },
        delay: function(el, i, t) {
          return 4200 + i * 20;
        },
        offset: 0
      });
  }
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
.anime-title {
  opacity: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
.anime-title.ready {
  opacity: 1;
}
.logo-animation {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  margin-top: -40px;
}
.letters {
  position: relative;
  display: flex;
  width: 682px;
  height: 162px;
}
.letter {
  position: relative;
  width: 162px;
  height: 162px;
}
.letter:not(:first-child) {
  margin-left: -42px;
}
.letter-i {
  z-index: 1;
  width: 82px;
  transform-origin: 100% 50%;
}
.dot {
  position: absolute;
  width: 42px;
  height: 42px;
  transform: scale(0);
}
.dot-i {
  top: 0;
  left: 240px;
}
.dot-e {
  bottom: 0;
  right: 0;
}
.logo-icon {
  display: flex;
  position: absolute;
  left: 230px;
  top: -10px;
  width: 222px;
  height: 62px;
}
.icon {
  width: 62px;
  height: 62px;
  opacity: 0;
}
.icon-text {
  position: absolute;
  top: 60px;
  left: 60px;
  width: 160px;
  height: 62px;
}
.icon-text path,
.icon-text polygon {
  opacity: 0;
}
</style>
